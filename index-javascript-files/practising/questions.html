<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>JS questions</title>

  <script>

    function preparePicker(picker_obj, picker_content_obj) {
        picker_obj.addEventListener('input', function () {
          picker_content_obj.style.backgroundColor = picker_obj.value;
          let [r, g, b] = picker_content_obj.style.backgroundColor.match(/\d+/g).map(Number);
          let y = 0.2126 * r + 0.7152 * g + 0.0722 * b; // Obliczenie luminancji Y

          console.log(`[DEBUG] picker_content_obj : ${picker_content_obj.style.backgroundColor}, luminosity: ${y}`)
          if (y < 50) {
            picker_content_obj.style.color = "#FFF";
            console.log("Kolor jest bliski czarnego, biała czcionka");
          }
          else {
            picker_content_obj.style.color = "#000";
            console.log("Kolor NIE jest bliski czarnego");

          }

        });
    }
  </script>


<script>
    function getFibonacciElement(num) {
      let a = 0;
      let b = 1;


      let counter = 0;

      while (counter <= num) {

        if (counter == 0 || counter == 1) {
            b = counter;
        }
        else {
            let temp = a; // Zapisujemy wartość `a` do zmiennej pomocniczej
            a = b; // Przypisujemy `b` do `a` (przechodzimy na następną liczbę)
            b = temp + b; // Przypisujemy sumę poprzednich dwóch liczb do `b`
        }

        let deep_log_message = '[DEBUG][getFibonacciElement] Subcalculations: calculated value for n-element: ' + counter + " of the Fibonacci order is: " + b + "."
        console.log(deep_log_message);

        counter += 1;
      }

      let log_message = '[INFO][getFibonacciElement] calculated value for n-element: ' + num + " of the Fibonacci order is: " + b + "."
      console.log(log_message);
      return b
      }

</script>
    <script>
    let x = getFibonacciElement(13);
</script>

  <script>
    console.log("[DEBUG 1][no defer/async -> blocking mode] JavaScript log code in <head> before everything related to styling (without 'type' script tag attribute).");
  </script>

  <script defer>
    console.log("[DEBUG 2][defer -> unblocking mode] JavaScript log code in <head> before everything related to styling (without 'type' script tag attribute).");
  </script>

  <script src="log3.js" defer>
  </script>

  <script src="log4.js" type="text/javascript" defer>
  </script>


  <script type="text/javascript" defer>
    console.log("[DEBUG 5][defer -> unblocking mode] JavaScript log code in <head> before everything related to styling (added type='text/javascript' script tag attribute).");
  </script>

  <script type="text/javascript">
    console.log("[DEBUG 6][no defer/async -> blocking mode] JavaScript log code in <head> before everything related to styling (added type='text/javascript' script tag attribute).");
  </script>

<style>
  .color-option {
    display: inline-block;
    width: 30px;
    height: 30px;
    margin: 5px;
    border: 2px solid #ccc;
    cursor: pointer;
  }

  input[type="radio"] {
    display: none;
  }

  input[type="radio"]:checked + label {
    border: 2px solid black;
  }

  body {
    margin: 1;
  }

  .outer {
    display: flex;
<!--    border: solid 4px black;-->
    box-sizing: border-box;
  }

  .main-content {
    flex: 1; /* zajmij resztę szerokości */
    padding: 10px;
    border: solid 4px black;
    font-size: 16px;
  }

  .side-block {
    width: 420px;
    padding: 10px;
<!--    margin-left: 10px;-->
<!--    border-left: solid 4px black;-->
    box-sizing: border-box;
  }

  .input_examples {
    display: inline-block;       /* pozwala na ustawianie szerokości/wysokości i układanie w linii */
    margin: 5px;                 /* odstęp na zewnątrz */
    border: solid 2px black;     /* ramka */
    box-sizing: border-box;      /* szerokość/wysokość zawiera padding + border */
    padding: 10px;
    width: 350px;
    height: 70px;
  }

    /* Stylowanie modala */
    #customAlert {
      display: none;
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ADD8E6;
      padding: 20px;
      border: 2px solid #000;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      z-index: 9999;
      text-align: center;
      width: 300px;
      animation: fadeIn 0.5s ease-out;
    }

    /* Animacja dla modala */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Przycisk zamknięcia */
    .close-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #0044cc;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    .close-btn:hover {
      background-color: #0033aa;
    }

    /* Ikona przycisku */
    .icon {
      font-size: 30px;
      color: #005b99;
      margin-bottom: 15px;
    }

</style>

</head>

<body>

<!--<h1 style="text-decoration: underline">001</h1>-->
<!--<h1 style="text-decoration: underline">001a</h1>-->
<!--<h1 style="text-decoration: underline">001b</h1>-->
<!--<h1 style="text-decoration: underline">001c</h1>-->
<!--<h1 style="text-decoration: underline">001d</h1>-->
<!--<h1 style="text-decoration: underline">001e</h1>-->
<!--<h1 style="text-decoration: underline">001f</h1>-->
<!--<br>-->
<br>
<br>



<h1 style="text-decoration: underline">001</h1>

<div class="outer" id="outer1">
  <div class="main-content" id="content1">
    <pre>JavaScript - characteristics:
 - multi-paradigm, dynamic language
    </pre>
  </div>

  <div class="side-block">
    <label for="colorPicker" style="margin: 3px;"><i>Pick a color describing self-evaluated understanding of the given section:</i></label>
      <br>
  <input type="color" id="colorPicker1" value="#ffff00" style="width: 350px; margin: 5px; height: 50px; font-size: 16px;" autocomplete="off" />

  <script>
    const picker1 = document.getElementById('colorPicker1');
    const content1 = document.getElementById('content1');

    picker1.addEventListener('input', function () {
      content2.style.backgroundColor = picker2.value;
      let [r, g, b] = content2.style.backgroundColor.match(/\d+/g).map(Number);
      let y = 0.2126 * r + 0.7152 * g + 0.0722 * b; // Obliczenie luminancji Y

      console.log(`[DEBUG] content2a : ${content2.style.backgroundColor}, luminosity: ${y}`)
      if (y < 50) {
        content2.style.color = "#FFF";
        console.log("Kolor jest bliski czarnego, biała czcionka");
      }
      else {
        content2.style.color = "#000";
        console.log("Kolor NIE jest bliski czarnego");

      }

    });
  </script>

  </div>
</div>

<br>






<h1 style="text-decoration: underline">002</h1>

<div class="outer" id="outer2">
  <div class="main-content" id="content2">
    <pre>How to embed JS code to html? <a href="../basics_002.html">Odpowiedź</a>
 - there are few options to embed JS code into html/DOM document
 - it is kind of knowledge about JavaScript environment</pre>
  </div>

  <div class="side-block">
    <label for="colorPicker" style="margin: 3px;"><i>Pick a color describing self-evaluated understanding of the given section:</i></label>
      <br>
  <input type="color" id="colorPicker2" value="#ffff00" style="width: 350px; margin: 5px; height: 50px; font-size: 16px;" autocomplete="off" />

  <script>
    const picker2 = document.getElementById('colorPicker2');
    const content2 = document.getElementById('content2');

    picker2.addEventListener('input', function () {
      content2.style.backgroundColor = picker2.value;
      let [r, g, b] = content2.style.backgroundColor.match(/\d+/g).map(Number);
      let y = 0.2126 * r + 0.7152 * g + 0.0722 * b; // Obliczenie luminancji Y

      console.log(`[DEBUG] content2a : ${content2.style.backgroundColor}, luminosity: ${y}`)
      if (y < 50) {
        content2.style.color = "#FFF";
        console.log("Kolor jest bliski czarnego, biała czcionka");
      }
      else {
        content2.style.color = "#000";
        console.log("Kolor NIE jest bliski czarnego");

      }

    });
  </script>

  </div>
</div>

<br>






<h1 style="text-decoration: underline">002a</h1>

<div class="outer" id="outer2a">
  <div class="main-content" id="content2a">

    <pre>JavaScript loading/embedding modes:
  - it will work correctly as none of defer/async modes (script tag asynchronous options) is used
  - then script will be executed synchronously in context of DOM building
  - going further, it can be said that we have here blocking script

It is important to know that <i>document.write</i> can behave unpredictably when used inappropriately.
For example when we use defer/async we cant be sure that code will be executed (browser decides and can ignore this code).
And finally 'document.write' is old-fashioned and not recommended to use. There are alternatives.</pre>

  </div>
  <div class="side-block">
    <label for="colorPicker" style="margin: 3px;"><i>Pick a color describing self-evaluated understanding of the given section:</i></label>
      <br>
  <input type="color" id="colorPicker2a" value="#ffff00" style="width: 350px; margin: 5px; height: 50px; font-size: 16px;" autocomplete="off" />

  <script>
    const picker2a = document.getElementById('colorPicker2a');
    const content2a = document.getElementById('content2a');
    preparePicker(picker2a, content2a)
  </script>

  </div>
</div>

<br>


<h1 style="text-decoration: underline">003</h1>

<div class="outer" id="outer3">
  <div class="main-content" id="content3">

    <pre>Ranges/Namespaces in JavaScript.
  - global, local function-like, block-like</pre>
  </div>
  <div class="side-block">
    <label for="colorPicker3" style="margin: 3px;"><i>Pick a color describing self-evaluated understanding of the given section:</i></label>
      <br>
  <input type="color" id="colorPicker3" value="#ffff00" style="width: 350px; margin: 5px; height: 50px; font-size: 16px;" autocomplete="off" />

  <script>
    const picker3 = document.getElementById('colorPicker3');
    const content3 = document.getElementById('content3');

    preparePicker(picker3, content3);

  </script>

  </div>
</div>


<h1 style="text-decoration: underline">004</h1>

<div class="outer" id="outer4">
  <div class="main-content" id="content4">

    <pre>Global context in JavaScript.
  - window object, Window function, globalThis alias
  - Web browser vs other environments (Node.js)</pre>

  </div>
  <div class="side-block">
    <label for="colorPicker4" style="margin: 3px;"><i>Pick a color describing self-evaluated understanding of the given section:</i></label>
      <br>
  <input type="color" id="colorPicker4" value="#ffff00" style="width: 350px; margin: 5px; height: 50px; font-size: 16px;" autocomplete="off" />

  <script>
    const picker4 = document.getElementById('colorPicker3');
    const content4 = document.getElementById('content3');

    preparePicker(picker4, content4);

  </script>

  </div>
</div>










<h1 style="text-decoration: underline">005</h1>

<div class="outer" id="outer5">
  <div class="main-content" id="content5">

    <pre>Typy w JavaScript: prymitywne i referencyjne (nie wszystko jest obiektem w Pythonie wszystko).

Typy prymitywne (Typy proste = prymitywy)
Charakterystyka/rodzaje:
   s1 = "Text ....."; // prymityw
   s2 = String("Text ....."); // prymityw
   s3 = new String("Text ....."); // obiekt typu String, nie prymityw

 - Nie mają prototypu, nie dziedziczą po Object, jest ich 7.
 - Prymitywy nie są obiektami, i nie mają właściwości ani metod.
 - undefined, symbol, bigint, number, string, null, boolean
 - W JavaScript przypisanie prymitywu to zawsze kopiowanie wartości, nie referencji.

 - Zazwyczaj są nieobiektowe i przechowują swoje wartości bezpośrednio. Jednak, są od tego wyjątki, jeśli to konieczne.
 - W pewnych sytuacjach, np kiedy próbujemy wywołać metody na tych typach (np. toUpperCase() na stringu),
   JS tymczasowo "opakowuje" te wartości w odpowiednie nowe obiekty - tj. autoboxing.
   Nie wszystkie typy posiadają obiektowe wersje: String, Number, Boolean, Symbol.

   Autoboxing flow: "abc".toUpperCase();
       new String("abc");
       toUpperCase();
       delete temp String object
       return "ABC"

Ciekawostki:
 - typeof NaN; // "number"
 - NaN === NaN; // false
 - Object.is(NaN, NaN); // true
 - 0 === -0; // true
 - Object.is(0, -0) // false
 - BigInt(10) === 10  // false
   falsy wartości:
 - false, 0, -0, 0n, "", null, undefined, NaN
 - Number(null) // 0
 - Number(undefined) // NaN
 - Number("10px") // NaN
 - String(false) // "false"
 - [] + [] // ""
 - [] + {} // "[object Object]"



Typy referencyjne (obiekty):
 - Object jest podstawowym typem referencyjnym.
 - Object, Array, Function, Date, Map itp.
 - Typy obiektowe są przekazywane przez referencję.
 - Każdy obiekt w JS ma tzw. prototyp — obiekt, z którego dziedziczy właściwości i metody.
</pre>

  </div>
  <div class="side-block">
    <label for="colorPicker" style="margin: 3px;"><i>Pick a color describing self-evaluated understanding of the given section:</i></label>
      <br>
  <input type="color" id="colorPicker5" value="#ffff00" style="width: 350px; margin: 5px; height: 50px; font-size: 16px;" autocomplete="off" />

  <script>
    const picker5 = document.getElementById('colorPicker5');
    const content5 = document.getElementById('content5');
    preparePicker(picker5, content5);

  </script>



  </div>
</div>




<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>



<h3 style="text-decoration: underline">Examples of informative buttons:</h3>

<div style="margin: 4px; border: 2px solid; width: 400px; padding: 10px;">

<!--<button onclick="alert('Witaj! Tutaj wyczyśćić zawartość danej strony.');document.write('<html><body style=&quot;background-color: #ADD8E6;&quot;></p></body></html>');console.log('JavaScript osadzony w atrybucie HTML.');">Kliknij, wtedy uruchomisz kod JS osadzony tutaj.</button>-->
<button onclick="alert('Click OK to get more information.');document.write('<html><body style=&quot;background-color: #ADD8E6;&quot;><br><p>... more information</p></body></html>');console.log('JavaScript code embedded in HTML attribute is running.');">Click to get more information [Alert component].</button>
<br>

  <!-- Modal -->
  <div id="customAlert">
    <div class="icon">🔔</div> <!-- Ikona -->
    <p>Click OK to get more information.</p>
    <button class="close-btn" onclick="closeModal()">OK</button>
  </div>

<!--style="background-color: #0044cc !important;"-->

  <!-- Przycisk, który otwiera modal -->
  <button style="border: 2px solid; border-radius: 5px;" onclick="openModal()">Click to get more information [Custom Modal component].</button>

  <script>
    // Funkcja otwierająca modal
    function openModal() {
      document.getElementById('customAlert').style.display = 'block';
    }

    // Funkcja zamykająca modal
    function closeModal() {
      document.getElementById('customAlert').style.display = 'none';
      //document.write('<html><body style=&quot;background-color: #ADD8E6;&quot;><br><p>... more information</p></body></html>');

    // Zmiana stylu całego body
    document.body.style.backgroundColor = '#ADD8E6';
    document.body.innerHTML = `<div style="padding: 20px;"><p>... more information</p></div>`;
    }
  </script>

</div>
<br>
<br>



<h3 style="text-decoration: underline">Examples of inputs:</h3>

<div style="margin: 4px; border: 2px solid; width: 400px; padding: 10px;">

<div class="input_examples">


  <label for="userInput">Put something:</label>
  <br>
  <input type="text" id="userInput" />
  <button style="margin-left: 20px;" id="submitBtn">OK</button>
</div>


<br>

<div class="input_examples">

<label for="colorSelect">Choose background color:</label><br>
<select id="colorSelect">
  <option value="#ff0000">Red</option>
  <option value="#00ff00">Green</option>
  <option value="#0000ff">Blue</option>
  <option value="#ffff00">Żółty</option>
  <option value="#ff00ff">Magenta</option>
  <option value="#ffffff">White</option>
  <option value="#000000">Black</option>
  <option value="#808080">Gray</option>
  <option value="#ffa500">Orange</option>
</select>

</div>

<br>


<div class="input_examples">

<form id="colorForm">
  <input type="radio" name="color" id="color1" value="#ff0000">
  <label for="color1" class="color-option" style="background-color: #ff0000;"></label>

  <input type="radio" name="color" id="color2" value="#00ff00">
  <label for="color2" class="color-option" style="background-color: #00ff00;"></label>

  <input type="radio" name="color" id="color3" value="#0000ff">
  <label for="color3" class="color-option" style="background-color: #0000ff;"></label>

  <!-- dodaj więcej... -->
</form>

</div>


<br>


<div class="input_examples">

<label for="colorPicker">Choose background color::</label>
<input type="color" id="colorPicker" value="#ff0000" />

<!--<div id="colorBox" style="width: 100px; height: 100px; background-color: #ff0000; margin-top: 10px;"></div>-->

<script>
  const picker = document.getElementById('colorPicker');
  const box = document.getElementById('colorBox');

  picker.addEventListener('input', function () {
    box.style.backgroundColor = picker.value;
  });
</script>

</div>

<div style="margin: 4px; border: 2px solid; width: 350px; padding: 10px;">

<div style="max-width: 320px; margin: auto; padding: 20px; border: solid 1px gray;">
  <input type="text"
         placeholder="Twoje imię"
         style="width: 100%; padding: 10px; font-size: 1rem; box-sizing: border-box; margin-bottom: 10px;" />

  <button style="width: 100%; padding: 12px; font-size: 1rem;">Wyślij</button>
</div>
</div>

</div>


<div>


  <script src="../basics_script.js"></script>
  <script src="../basics_script.js" defer></script>
  <script src="../basics_script.js" async></script>
  <!--  <script src="basics_script_global_var_check.js" defer></script>-->

</div>

<hr>

<!--<script>-->
<!--    function sleepSync(ms) {-->
<!--      const start = Date.now();-->
<!--      while (Date.now() - start < ms) {}-->
<!--    }-->
<!--    sleepSync(1);-->
<!--    document.body.innerHTML += '<hr>';-->

<!--</script>-->

<!--<hr>-->


<!-- The same directory and default file-based request approach will not handle it: -->
<!--Cross-Origin Request Blocked: reason: usage of file protocol not http-->
<!--<script type="module">-->
<!--    import { generateRandomNumber } from './es6_ecma_script.js';-->
<!--    generateRandomNumber();-->
<!--</script>-->

<!-- The same directory and default http server - again - will not to handle it: -->
<!-- Cross-Origin Request Blocked:
<--  The Same Origin Policy disallows reading the remote resource at http://127.0.0.1:8000/es6_ecma_script.js.
<--  (Reason: CORS header ‘Access-Control-Allow-Origin’ missing) -->
<!--<script type="module">-->
<!--    import { generateRandomNumber } from 'http://127.0.0.1:8000/es6_ecma_script.js';-->
<!--    generateRandomNumber();-->
<!--</script>-->


<!-- CORS allowing http server run to handle it: -->
<script type="module">
    import { generateRandomNumber } from 'http://127.0.0.1:8000/es6_ecma_script.js';
    generateRandomNumber();
</script>

<script src="../basics_script_fibonacci.js"></script>
<script>console.log('[DEBUG][blocking script] Checking this object in global context. This is:', this);</script>
<script>console.log('[DEBUG][blocking script] Checking this object in global context. window is:', window);</script>
<script>console.log('[DEBUG][blocking script] Checking this object in global context. Window is:', Window);</script>

<script type="module">
    function sleepSync(ms) {
      const start = Date.now();
      while (Date.now() - start < ms) {}
    }
    sleepSync(2000);

    import { objectSize } from 'http://127.0.0.1:8000/helpers.js';
    import { f_sleep } from 'http://127.0.0.1:8000/helpers.js';

    // f_sleep(1);
    // f_sleep(3, f_sleep, 2);

    let x1 = 22;
    let x2 = 3.14;
    let x3 = "a";
    let x4 = "Text abc.";
    console.log("[DEBUG][objectSize][let x1 = 22] x1 size:", objectSize(x1), "bytes.");
    console.log("[DEBUG][objectSize][let x2 = 3.14] x2 size:", objectSize(x2), "bytes.");
    console.log("[DEBUG][objectSize][let x3 = 'a'] x3 size:", objectSize(x3), "bytes.");
    console.log("[DEBUG][objectSize][let x4 = 'Text abc.'] x4 size:", objectSize(x4), "bytes.");

    import { dir } from 'http://127.0.0.1:8000/helpers.js';

    class A {
      methodA() {}
      static staticA() {}
    }

    class B extends A {
      methodB() {}
    }

    const b = new B();
    b.foo = 123;

    console.log("\n");
    console.log("[DEBUG][dir-like] dir-like functions in JavaScript:"); // metody/właściwości (enumerable/odziedziczone), posortowane
    console.log("[DEBUG][dir-like] dir(b):\n", dir(b)); // metody/właściwości (enumerable/odziedziczone), posortowane
    console.log("[DEBUG][dir-like] dir(b, { includeNonEnumerable: true }):\n", dir(b, { includeNonEnumerable: true })); // with enumerable properties
    console.log("[DEBUG][dir-like] dir(b, { includeNonEnumerable: true, includeSymbols: true }):\n", dir(b, { includeNonEnumerable: true, includeSymbols: true })); // with enumerable properties and symbols
    console.log("[DEBUG][dir-like] Object.keys(b):\n", Object.keys(b)); // tylko enumerable własne: ['foo']
    console.log("[DEBUG][dir-like] Object.getOwnPropertyNames(b):\n", Object.getOwnPropertyNames(b)); // własne, także nie-enumerable
    console.log("[DEBUG][dir-like] Reflect.ownKeys(b):\n", Reflect.ownKeys(b)); // własne klucze + symbole
    // console.dir(b); // interaktywnie w konsoli


    import { prototypePresentation } from 'http://127.0.0.1:8000/helpers.js';
    prototypePresentation();

    console.log("\n");
</script>



<script type="module">

    import { getRequest } from 'http://127.0.0.1:8000/helpers.js';
    getRequest("http://127.0.0.1:7001/");

    console.log('[DEBUG][blocking script][The latest before body] Ending.');
</script>

<!--<script>console.log('[DEBUG][blocking script][The latest before body] window object', window);</script>-->
</body>
</html>
